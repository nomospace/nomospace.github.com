<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta http-equiv="expires" content="-1" />
<meta http-equiv="cache-control" content="no-cache" />
<meta name="author" content="nomospace" />
<meta name="keywords" content="" />
<title>挪墨的空间 / JavaScript 中的作用域与变量声明提升 [翻译]</title>
<link href="http://nomospace.github.com/feed.xml" rel="alternate" title="挪墨的空间" type="application/atom+xml" />
<link rel="stylesheet" type="text/css" href="/assets/css/site.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/code/github.css" />

<!--[if IE]>
<script src="/assets/js/html5.js"></script>
<![endif]-->
</head>

<body class="page-type-post">

<div class="main">
	<div class="trace">/ <a href="/">挪墨的空间</a> / JavaScript 中的作用域与变量声明提升 [翻译]</div>

<article>
	<h1><a href="/posts/javaScript-scoping-and-hoisting.html">JavaScript 中的作用域与变量声明提升 [翻译]</a></h1>
	
	<p class="meta">
	<span class="datetime">2011-04-11</span> posted in [<a href="/category/javascript" class="category">javascript</a>]
</p>
	<div class="bct fc05 fc11 nbw-blog ztag js-fs2">原文地址：<a
        target="_blank" rel="nofollow" href="http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting">http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting</a><br>原文作者：<a
        target="_blank" rel="nofollow" href="http://www.adequatelygood.com/About-Ben">ben cherry</a><br><br>在前篇<a
        target="_blank" href="http://blog.163.com/jinlu_hz/blog/static/1138301522011218543321/">小议javascript之全局对象创建</a>译文中提到过JavaScript
    Hoisting概念，当时不甚了解。google之后发现<a target="_blank" rel="nofollow" href="http://www.adequatelygood.com/About-Ben">ben
        cherry</a>解释的最为明了，于是有了本文。<br>
        <br>——以下为翻译——<br>
    <wbr><br>JavaScript Scoping and Hoisting（</b><b>JavaScript中的</b><b>作用域与变量声明提升/声明时机提升）</b><br><br>你知道下面JavaScript代码的执行结果是什么吗？<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;foo&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;bar()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">if</span>&nbsp;(!foo)&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;foo&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">10</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;alert(foo);&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br>bar();</pre></span></span>如果你对foo的值实际上为"10"而感到诧异的话，再看一下下面这个例子：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;a&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;b()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">10</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">return</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;a()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br>b();&nbsp;<br>alert(a);</pre></span></span><br>发现浏览器会弹出alert(1)。怎么回事呢？看起来很诡异，这恰好是JavaScript语言的特性。我不确定这种表现行为是否已经有一个标准的命名了，于是我将此称为变量声明提升。本文会对这种机制进行揭秘，先从作用域谈起好了。<br><br><br><b>Scoping
        in JavaScript（</b><b>JavaScript</b><b>中的作用域）</b><br><br>对于很多JavaScript语言初学者而言，作用域带来许多困惑。当然也不仅仅是初学者会遇到这些问题，不少资深JavaScript程序员也未能完全掌握作用域的精髓。之所以带来困惑，其中一个原因是由于JavaScript实在太像C风格的语言了。如下是一段C程序：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">#include</span>&nbsp;&lt;stdio.h&gt;&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: blue;">int</span>&nbsp;main()&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: blue;">int</span>&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;printf(<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: teal;">"%d,&nbsp;"</span>,&nbsp;x);&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;1</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: bold; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">if</span>&nbsp;(<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>)&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: blue;">int</span>&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">2</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: teal;">"%d,&nbsp;"</span>,&nbsp;x);&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;2</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;printf(<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: teal;">"%d\n"</span>,&nbsp;x);&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;1</span>&nbsp;<br>}</pre></span></span><br>程序输出结果是<span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: Monaco,'lucida console',monospace; font-size: 12px; line-height: 18px;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>,&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">2</span>,&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span></span></span>。因为C风格的语言有<b>块级作用域（block-level
        scope）</b>。当函数鱼运行到<span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><span> </span><code
            style="margin: 0px; padding: 0px; border-width: 0px; vertical-align: baseline; font: 1em/1.5 Monaco,'lucida console',monospace; display: inline;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: bold; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">if</span></code><span> </span></span></span>语句中时，当前作用域中的新变量会被声明，并且不会影响到外部作用域。但在JavaScript中情况并不是这样：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br>console.log(x);&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;1</span>&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">if</span>&nbsp;(true)&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">2</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;console.log(x);&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;2</span>&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br>console.log(x);&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;2</span></pre></span></span><br>程序输出结果<span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: Monaco,'lucida console',monospace; font-size: 12px; line-height: 18px;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>,&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">2</span>,&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">2</span></span></span>。原因是JavaScript支持<b>函数作用域（function-level
        scope）</b>，这个特性与C风格的语言格格不入。<span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><span></span><code
            style="margin: 0px; padding: 0px; border-width: 0px; vertical-align: baseline; font: 1em/1.5 Monaco,'lucida console',monospace; display: inline;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: bold; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">if</span></code><span> </span></span></span>语句中的代码块并不会创建新的作用域，只有函数才会。<br><br>对于许多熟谙C\C++\C#\Java语言的程序员来说，JavaScript这个语言特性非常出乎意料。幸运的是，正由于JavaScript函数的灵活性，产生了一个变通方案。如果你必须在函数中创建一个临时作用域，可以这么做：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;foo()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">if</span>&nbsp;(x)&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">2</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;some&nbsp;other&nbsp;code</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>());&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;x&nbsp;is&nbsp;still&nbsp;1.</span>&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span></pre></span></span>这个函数非常灵活，不仅仅在块级语句内，需要时能在任何地方使用。然而我强烈建议你多花点时间来理解JavaScript的作用域。<br><br><br><b>Declarations,
        Names, and Hoisting（声明、名称以及</b><b>变量声明提升/声明时机提升</b>）<br><br>当访问函数内的变量时，JavaScript会按照下面顺序查找：<br>
    <ol>
        <li>语言级别：默认在所用作用域下会定义<span
                style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
                style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><code
                style="margin: 0px; padding: 0px; border-width: 0px; vertical-align: baseline; font: 1em/1.5 Monaco,'lucida console',monospace; display: inline;"><span
                style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">this</span></code><span>、</span></span></span><span
                style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
                style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><code
                style="margin: 0px; padding: 0px; border-width: 0px; vertical-align: baseline; font: 1em/1.5 Monaco,'lucida console',monospace; display: inline;"><span
                style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: purple;">arguments</span></code></span></span>
        </li>
        <li>传入参数：函数命名的参数，作用域是当前函数体</li>
        <li>函数声明：例如function foo() {}</li>
        <li>变量声明：例如var foo;</li>
    </ol>
    <font color="#999999">//以上翻译地比较晦涩，建议直接看原文</font><br>函数声明与变量声明经常被JavaScript引擎隐式地提升到当前作用域的顶部，也就是说：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;foo()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;bar();&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span></pre></span></span>实际上会被解释成：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;foo()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;x;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;bar();&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span></pre></span></span>也就是说，下面两种声明方式是等价的：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;foo()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">if</span>&nbsp;(false)&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">return</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;y&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;foo()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;x,&nbsp;y;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">if</span>&nbsp;(false)&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">return</span>;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>;&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span></pre></span></span><br>可以发现，声明语句中的赋值部分并没有被提升声明，只有名称被提升了。两种函数声明方式：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;test()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;foo();&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;TypeError&nbsp;"foo&nbsp;is&nbsp;not&nbsp;a&nbsp;function"</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;bar();&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;"this&nbsp;will&nbsp;run!"</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;foo&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;function&nbsp;expression&nbsp;assigned&nbsp;to&nbsp;local&nbsp;variable&nbsp;'foo'</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: teal;">"this&nbsp;won't&nbsp;run!"</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;bar()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;function&nbsp;declaration,&nbsp;given&nbsp;the&nbsp;name&nbsp;'bar'</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: teal;">"this&nbsp;will&nbsp;run!"</span>);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>&nbsp;<br>test();</pre></span></span>这个例子中，只有包含函数体的函数声明会被提升声明。foo虽然会被提升声明，但是函数体却在执行中被赋值。以上就是提升声明时机的基本概念，看起来一点也不复杂。<br><br><b><br>Name
        resolution order（名称解析顺序）</b><br><br>名称解析顺序有4步，一般来说，如果一个名称已经被定义了，它就不会被另一个具有同名称的属性所覆盖。这也就意味着，函数声明会比变量声明优先。并不是名称的赋值操作不会被执行，只是说声明部分被忽略了而已。有些例外：<br>
    <ul>
        <li>原生变量<span
                style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
                style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><code
                style="margin: 0px; padding: 0px; border-width: 0px; vertical-align: baseline; font: 1em/1.5 Monaco,'lucida console',monospace; display: inline;"><span
                style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: purple;">arguments</span></code><span></span></span></span>特立独行，包含了传递到函数中的参数。如果自定义以<span
                style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
                style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><code
                style="margin: 0px; padding: 0px; border-width: 0px; vertical-align: baseline; font: 1em/1.5 Monaco,'lucida console',monospace; display: inline;"><span
                style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: purple;">arguments</span></code><span></span></span></span>为命名的参数，将会阻止原生<span
                style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
                style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><code
                style="margin: 0px; padding: 0px; border-width: 0px; vertical-align: baseline; font: 1em/1.5 Monaco,'lucida console',monospace; display: inline;"><span
                style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: purple;">arguments</span></code><span></span></span></span>对象的创建。所以勿使用<font
                color="#00ccff"><span
                style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
                style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><code
                style="margin: 0px; padding: 0px; border-width: 0px; vertical-align: baseline; font: 1em/1.5 Monaco,'lucida console',monospace; display: inline;"><span
                style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: purple;">arguments</span></code><span></span></span></span></font>为名称的参数。
        </li>
        <li>胡乱使用<span
                style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
                style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><code
                style="margin: 0px; padding: 0px; border-width: 0px; vertical-align: baseline; font: 1em/1.5 Monaco,'lucida console',monospace; display: inline;"><span
                style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">this</span></code><span></span></span></span>标识符会引起语法错误。
        </li>
        <li>如果多个参数具有相同的命名，那么最后一个参数会优先于先前的，即时这个参数未定义。</li>
    </ul>
    <br><br><b>Named Function Expressions（函数命名表达式）</b><br><br>你可以通过函数表达式给函数命名，语法上看起来像是函数声明，实则不是。上一段代码：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;">foo();&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;TypeError&nbsp;"foo&nbsp;is&nbsp;not&nbsp;a&nbsp;function"</span>&nbsp;<br>bar();&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;valid</span>&nbsp;<br>baz();&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;TypeError&nbsp;"baz&nbsp;is&nbsp;not&nbsp;a&nbsp;function"</span>&nbsp;<br>spam();&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;ReferenceError&nbsp;"spam&nbsp;is&nbsp;not&nbsp;defined"</span>&nbsp;<br>&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;foo&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;anonymous&nbsp;function&nbsp;expression&nbsp;('foo'&nbsp;gets&nbsp;hoisted)</span>&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;bar()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;function&nbsp;declaration&nbsp;('bar'&nbsp;and&nbsp;the&nbsp;function&nbsp;body&nbsp;get&nbsp;hoisted)</span>&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;baz&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;spam()&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span>;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;named&nbsp;function&nbsp;expression&nbsp;(only&nbsp;'baz'&nbsp;gets&nbsp;hoisted)</span>&nbsp;<br>&nbsp;<br>foo();&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;valid</span>&nbsp;<br>bar();&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;valid</span>&nbsp;<br>baz();&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;valid</span>&nbsp;<br>spam();&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: green;">//&nbsp;ReferenceError&nbsp;"spam&nbsp;is&nbsp;not&nbsp;defined"</span> <br></pre></span></span><br><b>How
        to Code With This Knowledge（如何编码）</b><br><br>文章到此你应该已经理解什么是作用域和提升声明时机了，那么如何在实战中运用呢？切记，使用var表达式创建变量，在此强烈建议在代码块顶部使用一个var表达式来创建变量。然而，这么做的同时也导致开发者很难对当前作用域下实际被声明的变量进行跟踪。我建议开发者使用<a
            target="_blank" rel="nofollow" href="http://www.jslint.com/">JSLint</a>来进行验证：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px;"><pre
            style="margin: 1.5em 0px; padding: 0px; border-width: 0px; vertical-align: baseline; white-space: pre; font: 1em/1.5 Monaco,'lucida console',monospace; display: block; word-wrap: break-word;"><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: gray;">/*jslint&nbsp;onevar:&nbsp;true&nbsp;[...]&nbsp;*/</span>&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: rgb(65, 105, 225);">function</span>&nbsp;foo(a,&nbsp;b,&nbsp;c)&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">{</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: navy;">var</span>&nbsp;x&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: red;">1</span>,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bar,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;baz&nbsp;=&nbsp;<span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: inherit; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: teal;">"something"</span>;&nbsp;<br><span
            style="margin: 0px; padding: 0px; border-width: 0px; font-weight: normal; font-style: inherit; font-size: 12px; font-family: inherit; vertical-align: baseline; color: black;">}</span> <br></pre></span></span><br><b>What
        the Standard Says（看看规范上是怎么说的）</b><br><br>在<a target="_blank" rel="nofollow"
                                                     href="http://www.mozilla.org/js/language/E262-3.pdf">ECMAScript
        Standard </a>中的section12.2.2里写到：<br><span
            style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span
            style="color: rgb(102, 102, 102); font-family: 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 12px; font-style: italic; line-height: 18px;">If the variable statement occurs inside a FunctionDeclaration, the variables are defined with function-local scope in that function, as described in section 10.1.3. Otherwise, they are defined with global scope (that is, they are created as members of the global object, as described in section 10.1.3) using property attributes { DontDelete }. Variables are created when the execution scope is entered. A Block does not define a new execution scope. Only Program and FunctionDeclaration produce a new scope. Variables are initialised to undefined when created. A variable with an Initialiser is assigned the value of its AssignmentExpression when the VariableStatement is executed, not when the variable is created<font
            color="#999999">.</font></span></span><font color="#999999">//对ECMAScript不甚了解，故在此不作翻译</font><br><br>——翻译结束——<br>2011-04-11
    17:44:39<br><br>参考资料：<br><a target="_blank" rel="nofollow"
                                href="http://sanshi.me/articles/JavaScript-Garden-CN/html/index.html#scopes">作用域与命名空间</a>
</div>


	
	<!--<p class="permalink">永久链接：<a href="http://nomospace.github.com/posts/javaScript-scoping-and-hoisting.html">http://nomospace.github.com/posts/javaScript-scoping-and-hoisting.html</a></p>-->
</article>
<div id="disqus_thread" class="comments"></div>


	<footer>
		<p>&copy; Since 2012 <a href="http://github.com/nomospace" target="_blank">github.com/nomospace</a></p>
	</footer>
</div>

<aside>
	<h2><a href="/">挪墨的空间</a><a href="/feed.xml" class="feed-link" title="RSS订阅"><img src="http://blog.rexsong.com/wp-content/themes/rexsong/icon_feed.gif" alt="RSS feed" /></a></h2>

	<nav class="block">
		<ul>
		<li class="javascript"><a href="/category/javascript/">javascript</a></li>
		<li class="node"><a href="/category/node/">node</a></li>
		<li class="css"><a href="/category/css/">css</a></li>
		<li class="html5"><a href="/category/html5/">html5</a></li>
		<li class="frontend"><a href="/category/frontend/">frontend</a></li>
		
		</ul>
	</nav>

	<form action="/search/" class="block block-search">
		<h3>搜索</h3>
		<p><input type="search" name="q" placeholder="输入关键词按回车搜索" /></p>
	</form>

	<div class="block block-about">
		<h3>关于</h3>
		<figure>
			<img src="http://www.gravatar.com/avatar/d6e8639fcaea0c7c0fab106033f05de0?s=80" />
			<figcaption><strong>nomospace</strong></figcaption>
		</figure>
	</div>

	<a href="http://github.com/nomospace" class="forkme"><img src="/assets/images/forkmeongithub.png" alt="Fork me on GitHub"></a>

    <div class="block block-license">
        <h3>版权申明</h3>
        <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/2.5/cn/" target="_blank" class="hide-target-icon" title="Copyright declaration of site content"><img alt="知识共享许可协议" src="http://i.creativecommons.org/l/by-nc-nd/2.5/cn/88x31.png" /></a></p>
    </div>

	<div class="block block-thank">
        <h3>Powered by</h3>
        <p>
            <a href="http://disqus.com/" target="_blank">Disqus</a>,
            <a href="http://www.google.com/cse/" target="_blank">Google Custom Search</a>,
            <a href="https://github.com/" target="_blank">GitHub</a>,
            <a href="http://en.gravatar.com/" target="_blank">Gravatar</a>,
            <a href="http://softwaremaniacs.org/soft/highlight/en/">HighlightJS</a>,
            <a href="https://github.com/mojombo/jekyll" target="_blank">jekyll</a>,
            <a href="https://github.com/mytharcher/SimpleGray" target="_blank">SimpleGray</a>
        </p>
    </div>

</aside>

<script src="/assets/js/highlight.js"></script>
<script src="/assets/js/hljs/languages/css.js"></script>
<script src="/assets/js/hljs/languages/xml.js"></script>
<script src="/assets/js/hljs/languages/javascript.js"></script>
<script src="/assets/js/hljs/languages/ruby.js"></script>
<script src="/assets/js/jquery-1.8.0.min.js"></script>
<script src="/assets/js/site.js"></script>
<script src="http://nomospace.disqus.com/embed.js"></script>

<script>
    var _errs=["4fcf6a84a57ce4043f00032a"];(function(a,b){a.onerror=function(){_errs.push(arguments)};
    var d=function(){var a=b.createElement("script"),c=b.getElementsByTagName("script")[0];
    a.src="//d15qhc0lu1ghnk.cloudfront.net/beacon.js";a.async=!0;
    c.parentNode.insertBefore(a,c)};a.addEventListener?a.addEventListener("load",d,!1):
    a.attachEvent("onload",d)})(window,document);
</script>
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31926992-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
